<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ OddsMagnet - Top 10 Football Leagues</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #16213e 50%, #0a0e27 100%);
            background-attachment: fixed;
            color: #e5e7eb;
            min-height: 100vh;
        }

        .container { max-width: 1920px; margin: 0 auto; padding: 24px; }

        /* Smooth transitions for all updates */
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        .fade-out {
            animation: fadeOut 0.2s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        .pulse {
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1a1f3a 0%, #0f1729 100%);
            border: 1px solid rgba(79, 172, 254, 0.2);
            border-radius: 12px;
            padding: 24px 32px;
            margin-bottom: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 700;
            color: #ffffff;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .stats-bar {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }

        .stat-card {
            background: #1a1a27;
            border: 1px solid #2a2a3e;
            border-radius: 8px;
            padding: 10px 16px;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .stat-label {
            font-size: 10px;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 700;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .live-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
            animation: pulse 2s infinite;
        }

        .live-status.fetching .live-dot {
            background: #f59e0b;
        }

        /* Filters */
        .filters {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            padding-top: 16px;
            border-top: 1px solid #1f1f2e;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
            flex: 1;
            min-width: 180px;
        }

        .filter-label {
            font-size: 10px;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .filter-input, .filter-select {
            background: #1a1a27;
            border: 1px solid #2a2a3e;
            border-radius: 6px;
            padding: 8px 12px;
            color: #ffffff;
            font-size: 13px;
            transition: all 0.2s;
        }

        .filter-input:focus, .filter-select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
        }

        .btn {
            background: #3b82f6;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            color: #ffffff;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
            justify-content: center;
        }

        .btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #1a1a27;
            border: 1px solid #2a2a3e;
        }

        .btn-secondary:hover {
            background: #2a2a3e;
        }

        /* Matches Grid */
        .matches-grid {
            display: grid;
            gap: 16px;
        }

        .match-card {
            background: linear-gradient(135deg, #1a1f3a 0%, #0f1729 100%);
            border: 1px solid rgba(79, 172, 254, 0.15);
            border-radius: 8px;
            padding: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            opacity: 1;
        }

        .match-card:hover {
            border-color: #4facfe;
            box-shadow: 0 8px 24px rgba(79, 172, 254, 0.2);
            transform: translateY(-2px);
        }

        .match-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .match-card:hover::before { opacity: 1; }

        .match-card.updating {
            animation: pulseCard 0.5s ease-in-out;
        }

        @keyframes pulseCard {
            0%, 100% { border-color: rgba(79, 172, 254, 0.15); }
            50% { border-color: rgba(79, 172, 254, 0.5); box-shadow: 0 0 20px rgba(79, 172, 254, 0.3); }
        }

        .match-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid #1f1f2e;
        }

        .match-league {
            font-size: 10px;
            color: #6b7280;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(59, 130, 246, 0.1);
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .match-time {
            font-size: 11px;
            color: #9ca3af;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .match-teams {
            margin-bottom: 16px;
        }

        .team-name {
            font-size: 16px;
            font-weight: 600;
            color: #ffffff;
            padding: 4px 0;
        }

        .team-name:first-child {
            margin-bottom: 4px;
        }

        .vs-separator {
            font-size: 10px;
            color: #6b7280;
            font-weight: 700;
            text-align: center;
            margin: 4px 0;
            letter-spacing: 1px;
        }

        /* Markets Section */
        .markets-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .market-block {
            background: #1a1a27;
            border: 1px solid #2a2a3e;
            border-radius: 6px;
            padding: 12px;
        }

        .market-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .market-title {
            font-size: 12px;
            font-weight: 700;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .market-count {
            font-size: 10px;
            color: #6b7280;
            background: #14141f;
            padding: 3px 8px;
            border-radius: 4px;
        }

        .odds-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 8px;
        }

        .odds-button {
            background: linear-gradient(135deg, #0f1525 0%, #1a1f3a 100%);
            border: 1px solid rgba(79, 172, 254, 0.2);
            border-radius: 6px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            display: flex;
            flex-direction: column;
            gap: 4px;
            position: relative;
            overflow: hidden;
        }

        .odds-button::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(79, 172, 254, 0.1), transparent);
            transition: left 0.5s;
        }

        .odds-button:hover::after {
            left: 100%;
        }

        .odds-button:hover {
            border-color: #4facfe;
            background: linear-gradient(135deg, #1a1f3a 0%, #0f1729 100%);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(79, 172, 254, 0.3);
        }

        .odds-button.best-odds {
            border-color: #10b981;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(5, 150, 105, 0.08) 100%);
        }

        .odds-button.best-odds::before {
            content: '‚≠ê';
            position: absolute;
            top: 4px;
            right: 4px;
            font-size: 10px;
            animation: twinkle 2s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .odds-button.price-up {
            animation: priceUp 0.6s ease-out;
        }

        .odds-button.price-down {
            animation: priceDown 0.6s ease-out;
        }

        @keyframes priceUp {
            0% { background: rgba(16, 185, 129, 0.2); }
            100% { background: linear-gradient(135deg, #0f1525 0%, #1a1f3a 100%); }
        }

        @keyframes priceDown {
            0% { background: rgba(239, 68, 68, 0.2); }
            100% { background: linear-gradient(135deg, #0f1525 0%, #1a1f3a 100%); }
        }

        .bookmaker-logo {
            font-size: 10px;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .selection-name {
            font-size: 12px;
            font-weight: 600;
            color: #e5e7eb;
            margin: 4px 0;
        }

        .odds-value {
            font-size: 18px;
            font-weight: 700;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .odds-movement {
            font-size: 10px;
            display: flex;
            align-items: center;
            gap: 4px;
            margin-top: 4px;
        }

        .odds-movement.up { color: #10b981; }
        .odds-movement.down { color: #ef4444; }

        .odds-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 9px;
            color: #6b7280;
            margin-top: 4px;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin-top: 24px;
            padding: 20px;
            background: #14141f;
            border: 1px solid #1f1f2e;
            border-radius: 8px;
        }

        .page-btn {
            background: #1a1a27;
            border: 1px solid #2a2a3e;
            border-radius: 6px;
            padding: 6px 12px;
            color: #ffffff;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 36px;
        }

        .page-btn:hover:not(:disabled) {
            background: #2a2a3e;
            border-color: #3b82f6;
        }

        .page-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .page-btn.active {
            background: #3b82f6;
            border-color: #3b82f6;
        }

        .page-info {
            font-size: 13px;
            color: #9ca3af;
            padding: 0 12px;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 60px;
            color: #6b7280;
        }

        .spinner {
            border: 3px solid #2a2a3e;
            border-top-color: #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            background: #14141f;
            border: 1px solid #1f1f2e;
            border-radius: 8px;
        }

        .empty-icon {
            font-size: 48px;
            color: #6b7280;
            margin-bottom: 16px;
        }

        .empty-title {
            font-size: 18px;
            font-weight: 600;
            color: #9ca3af;
            margin-bottom: 8px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 { font-size: 18px; }
            .filters { flex-direction: column; }
            .stats-bar { flex-direction: column; width: 100%; }
            .odds-grid { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-top">
                <h1>
                    <i class="fas fa-futbol"></i>
                    OddsMagnet - Top 10 Leagues
                </h1>
                <div class="stats-bar">
                    <div class="live-status" id="liveStatus">
                        <div class="live-dot"></div>
                        <span id="statusText">Live</span>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Matches</div>
                        <div class="stat-value" id="totalMatches">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Showing</div>
                        <div class="stat-value" id="showingMatches">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Updated</div>
                        <div class="stat-value" id="lastUpdate" style="font-size: 12px;">--:--</div>
                    </div>
                </div>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label class="filter-label">League</label>
                    <select class="filter-select" id="leagueFilter">
                        <option value="">All Leagues</option>
                        <option value="premier">Premier League</option>
                        <option value="laliga">La Liga</option>
                        <option value="serie-a">Serie A</option>
                        <option value="bundesliga">Bundesliga</option>
                        <option value="ligue-1">Ligue 1</option>
                        <option value="champions">Champions League</option>
                        <option value="europa">Europa League</option>
                        <option value="championship">Championship</option>
                        <option value="eredivisie">Eredivisie</option>
                        <option value="primeira">Primeira Liga</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Search Teams</label>
                    <input type="text" class="filter-input" id="searchInput" placeholder="Search...">
                </div>
                <div class="filter-group" style="max-width: 140px;">
                    <label class="filter-label">Per Page</label>
                    <select class="filter-select" id="pageSizeSelect">
                        <option value="10">10</option>
                        <option value="25" selected>25</option>
                        <option value="50">50</option>
                    </select>
                </div>
                <div class="filter-group" style="flex: 0; min-width: auto;">
                    <label class="filter-label">&nbsp;</label>
                    <button class="btn" onclick="applyFilters()">
                        <i class="fas fa-filter"></i> Apply
                    </button>
                </div>
                <div class="filter-group" style="flex: 0; min-width: auto;">
                    <label class="filter-label">&nbsp;</label>
                    <button class="btn btn-secondary" onclick="clearFilters()">
                        <i class="fas fa-times"></i> Clear
                    </button>
                </div>
            </div>
        </div>

        <div id="matchesContainer">
            <div class="loading">
                <div class="spinner"></div>
                <div>Loading matches...</div>
            </div>
        </div>

        <div id="paginationContainer"></div>
    </div>

    <script>
        let currentPage = 1;
        let currentData = null;
        let previousOdds = new Map(); // Track odds changes
        let isLoading = false;

        async function loadMatches(page = 1, silent = false) {
            if (isLoading) return;
            
            try {
                isLoading = true;
                if (!silent) updateStatus('fetching');

                const league = document.getElementById('leagueFilter').value;
                const search = document.getElementById('searchInput').value;
                const pageSize = document.getElementById('pageSizeSelect').value;

                const params = new URLSearchParams({
                    page: page,
                    page_size: pageSize
                });

                if (league) params.append('league', league);
                if (search) params.append('search', search);

                const response = await fetch(`/oddsmagnet/football/top10?${params}`);
                const data = await response.json();

                currentData = data;
                currentPage = page;

                renderMatches(data, silent);
                renderPagination(data);
                updateStats(data);
                updateStatus('live');
            } catch (error) {
                console.error('Error loading matches:', error);
                updateStatus('error');
                if (!silent) {
                    document.getElementById('matchesContainer').innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon"><i class="fas fa-exclamation-triangle"></i></div>
                            <div class="empty-title">Error Loading Data</div>
                        </div>
                    `;
                }
            } finally {
                isLoading = false;
            }
        }

        function updateStatus(status) {
            const statusEl = document.getElementById('liveStatus');
            const textEl = document.getElementById('statusText');
            
            statusEl.classList.remove('fetching');
            
            if (status === 'fetching') {
                statusEl.classList.add('fetching');
                textEl.textContent = 'Updating...';
            } else if (status === 'live') {
                textEl.textContent = 'Live';
            } else if (status === 'error') {
                textEl.textContent = 'Error';
            }
        }

        function renderMatches(data, silent = false) {
            const container = document.getElementById('matchesContainer');

            if (!data.matches || data.matches.length === 0) {
                container.innerHTML = `
                    <div class="empty-state fade-in">
                        <div class="empty-icon"><i class="fas fa-search"></i></div>
                        <div class="empty-title">No Matches Found</div>
                    </div>
                `;
                return;
            }

            const html = data.matches.map(match => {
                const teams = match.match_name ? match.match_name.split(' v ') : ['', ''];
                const popularMarkets = match.markets?.['popular markets'] || [];
                const winMarket = popularMarkets.find(m => m.market_name?.toLowerCase().includes('win'));
                
                let marketsHtml = '';
                if (winMarket && winMarket.odds) {
                    // Group odds by selection
                    const oddsGrouped = {};
                    winMarket.odds.forEach(odd => {
                        const selection = odd.selection || 'unknown';
                        if (!oddsGrouped[selection]) {
                            oddsGrouped[selection] = [];
                        }
                        oddsGrouped[selection].push(odd);
                    });

                    // Render each selection group - SHOW ALL BOOKMAKERS
                    marketsHtml = Object.entries(oddsGrouped).map(([selection, odds]) => {
                        const sortedOdds = odds.sort((a, b) => (b.decimal_odds || 0) - (a.decimal_odds || 0));
                        const topOdds = sortedOdds; // Show ALL bookmakers
                        
                        return `
                            <div class="market-block">
                                <div class="market-header">
                                    <div class="market-title">
                                        <i class="fas fa-trophy"></i>
                                        ${selection.charAt(0).toUpperCase() + selection.slice(1)}
                                    </div>
                                    <div class="market-count">${odds.length} bookmakers</div>
                                </div>
                                <div class="odds-grid">
                                    ${topOdds.map(odd => {
                                        const oddKey = `${match.match_name}-${selection}-${odd.bookmaker_code}`;
                                        const prevOdd = previousOdds.get(oddKey);
                                        const priceClass = prevOdd && prevOdd !== odd.decimal_odds ? 
                                            (odd.decimal_odds > prevOdd ? 'price-up' : 'price-down') : '';
                                        previousOdds.set(oddKey, odd.decimal_odds);
                                        
                                        return `
                                        <a href="${odd.clickout_url || '#'}" 
                                           target="_blank" 
                                           class="odds-button ${odd.is_best_odds ? 'best-odds' : ''} ${priceClass}"
                                           ${!odd.clickout_url ? 'onclick="return false;"' : ''}>`
                                    }).join('')}
                                            <div class="bookmaker-logo">${odd.bookmaker_name || 'Unknown'}</div>
                                            <div class="odds-value">${odd.decimal_odds || 'N/A'}</div>
                                            ${odd.odds_movement ? `
                                                <div class="odds-movement ${odd.odds_movement}">
                                                    <i class="fas fa-arrow-${odd.odds_movement === 'up' ? 'up' : 'down'}"></i>
                                                    ${odd.odds_change ? (odd.odds_change > 0 ? '+' : '') + odd.odds_change.toFixed(2) : ''}
                                                </div>
                                            ` : ''}
                                            <div class="odds-meta">
                                                <span>\${odd.fractional_odds || ''}</span>
                                                \${odd.is_best_odds ? '<span style="color: #10b981;">Best</span>' : ''}
                                            </div>
                                        </a>
                                    `;
                                    }).join('')}
                                </div>
                            </div>
                        `;
                    }).join('');
                }

                return `
                    <div class="match-card">
                        <div class="match-header">
                            <div class="match-league">
                                <i class="fas fa-flag"></i>
                                ${match.league || 'Unknown'}
                            </div>
                            <div class="match-time">
                                <i class="fas fa-clock"></i>
                                ${match.match_date ? new Date(match.match_date).toLocaleString('en-US', { 
                                    month: 'short', 
                                    day: 'numeric',
                                    hour: '2-digit',
                                    minute: '2-digit'
                                }) : 'TBD'}
                            </div>
                        </div>
                        <div class="match-teams">
                            <div class="team-name">${teams[0] || 'Team 1'}</div>
                            <div class="vs-separator">VS</div>
                            <div class="team-name">${teams[1] || 'Team 2'}</div>
                        </div>
                        <div class="markets-container">
                            ${marketsHtml || '<div style="text-align: center; color: #6b7280; padding: 20px;">No odds available</div>'}
                        </div>
                    </div>
                `;
            }).join('');

            // Smooth update without flickering
            const existingGrid = container.querySelector('.matches-grid');
            if (existingGrid && silent) {
                existingGrid.innerHTML = html;
                // Add updating animation to changed cards
                existingGrid.querySelectorAll('.match-card').forEach((card, idx) => {
                    setTimeout(() => card.classList.add('fade-in'), idx * 20);
                });
            } else {
                container.innerHTML = `<div class="matches-grid fade-in">${html}</div>`;
            }
        }

        function renderPagination(data) {
            const container = document.getElementById('paginationContainer');
            const pagination = data.pagination;

            if (!pagination || pagination.total_pages <= 1) {
                container.innerHTML = '';
                return;
            }

            const pages = [];
            const maxVisible = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisible / 2));
            let endPage = Math.min(pagination.total_pages, startPage + maxVisible - 1);

            if (endPage - startPage < maxVisible - 1) {
                startPage = Math.max(1, endPage - maxVisible + 1);
            }

            for (let i = startPage; i <= endPage; i++) {
                pages.push(i);
            }

            container.innerHTML = `
                <div class="pagination">
                    <button class="page-btn" onclick="loadMatches(1)" ${!pagination.has_prev ? 'disabled' : ''}>
                        <i class="fas fa-angle-double-left"></i>
                    </button>
                    <button class="page-btn" onclick="loadMatches(${currentPage - 1})" ${!pagination.has_prev ? 'disabled' : ''}>
                        <i class="fas fa-angle-left"></i>
                    </button>
                    
                    ${pages.map(p => `
                        <button class="page-btn ${p === currentPage ? 'active' : ''}" onclick="loadMatches(${p})">
                            ${p}
                        </button>
                    `).join('')}
                    
                    <button class="page-btn" onclick="loadMatches(${currentPage + 1})" ${!pagination.has_next ? 'disabled' : ''}>
                        <i class="fas fa-angle-right"></i>
                    </button>
                    <button class="page-btn" onclick="loadMatches(${pagination.total_pages})" ${!pagination.has_next ? 'disabled' : ''}>
                        <i class="fas fa-angle-double-right"></i>
                    </button>
                    
                    <div class="page-info">
                        ${currentPage}/${pagination.total_pages} (${pagination.total_items})
                    </div>
                </div>
            `;
        }

        function updateStats(data) {
            document.getElementById('totalMatches').textContent = data.total_matches_top10 || 0;
            document.getElementById('showingMatches').textContent = data.matches?.length || 0;
            
            if (data.timestamp) {
                const time = new Date(data.timestamp).toLocaleTimeString('en-US', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                document.getElementById('lastUpdate').textContent = time;
            }
        }

        function applyFilters() {
            loadMatches(1);
        }

        function clearFilters() {
            document.getElementById('leagueFilter').value = '';
            document.getElementById('searchInput').value = '';
            document.getElementById('pageSizeSelect').value = '25';
            loadMatches(1);
        }

        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') applyFilters();
        });

        // Auto-refresh every 15 seconds (silent mode for smooth updates)
        setInterval(() => {
            if (currentPage && !isLoading) {
                loadMatches(currentPage, true); // Silent refresh
            }
        }, 15000);

        // Initial load
        loadMatches(1);
    </script>
</body>
</html>
